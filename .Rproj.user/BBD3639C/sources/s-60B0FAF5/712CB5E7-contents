---
title: "main"
author: "Reza Dwi Utomo"
date: "23/03/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Langkah pre-processinh untuk yanh scotty:

1. Floor_date (rounding data date menjadi hourly)
2. grouping dan summarise dari datetime dan src_area kemudian dapet kolom demand
3. time series padding

floor_date library lubridate
untuk padding time series dari library padr::pad()

Mas itu kayaknya src_sub_area untuk Scotty time series
kalo liat test data setnya

```{r}
library(tidyverse)
library(lubridate)
library(purrr)
```


```{r}
scotty <- read.csv("data/data-train.csv")
scotty
```

```{r}
scotty <- scotty %>% select(start_time, src_sub_area)
scotty$start_time <- ymd_hms(scotty$start_time)
```

```{r}
scotty <- scotty %>% 
  mutate(datetime = floor_date(x = .$start_time, unit = "hour"))

```

```{r}
scotty <- scotty %>% 
  group_by(src_sub_area, datetime) %>% 
  summarise(demand = n())
```

```{r}
min_date <- min(scotty$datetime)
max_date <- max(scotty$datetime)

start_val <- make_datetime(year = year(min_date), month = month(min_date), day = day(min_date), hour = hour(min_date))
end_val <- make_datetime(year = year(max_date), month = month(max_date), day = day(max_date), hour = hour(max_date))

scotty_pad <- padr::pad(x = scotty, start_val = start_val, end_val = end_val)
```

```{r}
scotty_pad$demand <- replace_na(scotty_pad$demand, 0)
```

```{r}
scotty_ts <- ts(scotty_pad$demand, frequency = 24)
head(scotty_ts)
purrr::
```


```{r}

```

